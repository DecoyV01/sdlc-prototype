<!DOCTYPE html>
<html>
<head>
  <title>AI-Driven SDLC</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>
<body>
  <div id="app">
    <h1>AI-Driven SDLC</h1>
    <textarea v-model="input" placeholder="Enter requirements (e.g., Build a login page)"></textarea>
    <button @click="submit">Generate</button>
    <h3 v-if="error">Error:</h3><pre v-if="error">{{ error }}</pre>
    <h3>BRS:</h3><pre>{{ brs }}</pre>
    <h3>Functional Doc:</h3><pre>{{ functional }}</pre>
    <h3>Code:</h3><pre>{{ code }}</pre>
  </div>
  <script>
    new Vue({
      el: '#app',
      data: {
        input: '',
        brs: '',
        functional: '',
        code: '',
        error: ''
      },
      methods: {
        async submit() {
          try {
            console.log('Submitting...');
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbyajlkPGuvSY3Mn8Z1pmkQtrYj_5vjEVgWYtBI0laAMruCHL8U58F6Cry0icJ8-gA/exec';
            console.log('Fetching:', `${scriptUrl}?input=${encodeURIComponent(this.input)}`);
            const response = await fetch(`${scriptUrl}?input=${encodeURIComponent(this.input)}`);
            console.log('Response status:', response.status);
            const data = await response.json();
            console.log('Data:', data);
            if (data.error) {
              this.error = data.error;
              this.brs = this.functional = this.code = '';
            } else {
              this.error = '';
              this.brs = data.brs;
              this.functional = data.functional;
              this.code = data.code;
            }
          } catch (err) {
            console.log('Fetch error:', err);
            this.error = 'Fetch error: ' + err.message;
            this.brs = this.functional = this.code = '';
          }
        }
      }
    });
  </script>
</body>
</html>